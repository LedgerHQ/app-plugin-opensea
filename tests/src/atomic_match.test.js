import "core-js/stable";
import "regenerator-runtime/runtime";
import { waitForAppScreen, zemu, genericTx, SPECULOS_ADDRESS, RANDOM_ADDRESS, txFromEtherscan } from './test.fixture';
import { ethers } from "ethers";
import { parseEther, parseUnits } from "ethers/lib/utils";

const contractAddr = "0x7be8076f4ea4a4ad08075c2508e481d6c946d12b";
const pluginName = "opensea";
const abi_path = `../${pluginName}/abis/` + contractAddr + '.json';
const abi = require(abi_path);

// from https://etherscan.io/tx/0x0a863562ee39b566d2eac1d11f0bcefab4fac12c26dc300fa8ad0df3a142afad
test('[Nano S] nanos_atomicMatch_single_address_eth', zemu("nanos", async (sim, eth) => {
  const serializedTx = txFromEtherscan("0x02f909da01288459682f00851fb1117a6983048ba4947be8076f4ea4a4ad08075c2508e481d6c946d12b8803544bc7699dc000b90964ab834bab0000000000000000000000007be8076f4ea4a4ad08075c2508e481d6c946d12b0000000000000000000000005b1a00402c6aabc799aa30d009fb26ec7980ba0a0000000000000000000000001b33b9d0322d84434cc217c76611902515db8b5c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000bd4455da5929d5639ee098abfaa3241e9ae111af000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007be8076f4ea4a4ad08075c2508e481d6c946d12b0000000000000000000000001b33b9d0322d84434cc217c76611902515db8b5c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000005b3256965e7c3cf26e11fcaf296dfc8807c01073000000000000000000000000bd4455da5929d5639ee098abfaa3241e9ae111af0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003544bc7699dc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000615ee5230000000000000000000000000000000000000000000000000000000000000000868eafdfe2c6c007d65a7d28b4465db1874b404b85c1a1b0beedfc99ea95feec00000000000000000000000000000000000000000000000000000000000004b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003544bc7699dc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000615edd760000000000000000000000000000000000000000000000000000000061602f3442dd9c6e64919f8eab37953ea61a908e88263c5ae9cc95235a2132ae58390aa90000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006a0000000000000000000000000000000000000000000000000000000000000074000000000000000000000000000000000000000000000000000000000000007e0000000000000000000000000000000000000000000000000000000000000088000000000000000000000000000000000000000000000000000000000000009200000000000000000000000000000000000000000000000000000000000000940000000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000001c7b8fc5efce71806fbd743448ef59f2ddbc5532dd74d5f4bb410a9d4cfae908475c6d9c246b7e4a8bd0d3f810f70015a4f95cf02530b13bb6510e3115907bf6b17b8fc5efce71806fbd743448ef59f2ddbc5532dd74d5f4bb410a9d4cfae908475c6d9c246b7e4a8bd0d3f810f70015a4f95cf02530b13bb6510e3115907bf6b10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006423b872dd00000000000000000000000000000000000000000000000000000000000000000000000000000000000000005b1a00402c6aabc799aa30d009fb26ec7980ba0a000000000000000000000000000000000000000000000000000000000000194700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006423b872dd0000000000000000000000001b33b9d0322d84434cc217c76611902515db8b5c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000194700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006400000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000064000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c001a0c3002685040139688670f9024ae7379987c4746b4776ebdbf714d2a28503087fa01dae01bc11fd28525711e6cd19ce58c042b6b07a6121d19056a91507a0595a27");
  const tx = eth.signTransaction(
    "44'/60'/0'/0",
    serializedTx,
  );
  await waitForAppScreen(sim);
  await sim.navigateAndCompareSnapshots('.', 'nanos_atomicMatch_single_address_eth', [11, 0]);
  await tx;
}));

// from https://etherscan.io/tx/0x0a863562ee39b566d2eac1d11f0bcefab4fac12c26dc300fa8ad0df3a142afad
// but the address passed in calldata transfer methods is modified in order to unmatch the one passed in TO.
// test('[Nano S] nanos_atomicMatch_single_address_eth_warning_beneficiary', zemu("nanos", async (sim, eth) => {
  // const serializedTx = txFromEtherscan("0x02f909da01288459682f00851fb1117a6983048ba4947be8076f4ea4a4ad08075c2508e481d6c946d12b8803544bc7699dc000b90964ab834bab0000000000000000000000007be8076f4ea4a4ad08075c2508e481d6c946d12b0000000000000000000000005b1a00402c6aabc799aa30d009fb26ec7980ba0a0000000000000000000000001b33b9d0322d84434cc217c76611902515db8b5c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000bd4455da5929d5639ee098abfaa3241e9ae111af000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007be8076f4ea4a4ad08075c2508e481d6c946d12b0000000000000000000000001b33b9d0322d84434cc217c76611902515db8b5c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000005b3256965e7c3cf26e11fcaf296dfc8807c01073000000000000000000000000bd4455da5929d5639ee098abfaa3241e9ae111af0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003544bc7699dc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000615ee5230000000000000000000000000000000000000000000000000000000000000000868eafdfe2c6c007d65a7d28b4465db1874b404b85c1a1b0beedfc99ea95feec00000000000000000000000000000000000000000000000000000000000004b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003544bc7699dc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000615edd760000000000000000000000000000000000000000000000000000000061602f3442dd9c6e64919f8eab37953ea61a908e88263c5ae9cc95235a2132ae58390aa90000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006a0000000000000000000000000000000000000000000000000000000000000074000000000000000000000000000000000000000000000000000000000000007e0000000000000000000000000000000000000000000000000000000000000088000000000000000000000000000000000000000000000000000000000000009200000000000000000000000000000000000000000000000000000000000000940000000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000001c7b8fc5efce71806fbd743448ef59f2ddbc5532dd74d5f4bb410a9d4cfae908475c6d9c246b7e4a8bd0d3f810f70015a4f95cf02530b13bb6510e3115907bf6b17b8fc5efce71806fbd743448ef59f2ddbc5532dd74d5f4bb410a9d4cfae908475c6d9c246b7e4a8bd0d3f810f70015a4f95cf02530b13bb6510e3115907bf6b10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006423b872dd00000000000000000000000000000000000000000000000000000000000000000000000000000000000000005b1a00402c6aabc799aa30d009fb26ec7980ba0a000000000000000000000000000000000000000000000000000000000000194700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006423b872dd0000000000000000000000001b33b9d0322d84434cc217c76611902515db8b5c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000194700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006400000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000064000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c001a0c3002685040139688670f9024ae7379987c4746b4776ebdbf714d2a28503087fa01dae01bc11fd28525711e6cd19ce58c042b6b07a6121d19056a91507a0595a27");
  // const tx = eth.signTransaction(
    // "44'/60'/0'/0",
    // serializedTx,
  // );
  // await waitForAppScreen(sim);
  // await sim.navigateAndCompareSnapshots('.', 'nanos_atomicMatch_single_address_eth_warning_beneficiary', [11, 0]);
  // await tx;
// }));

// from https://etherscan.io/tx/0xfb7ea354650bf5c5dcb84340c9da9ec092bf296a1ff81302da9d449c086bdbac
test('[Nano S] nanos_atomicMatch_single_address_weth', zemu("nanos", async (sim, eth) => {
  const serializedTx = txFromEtherscan("0x02f909d4018201b98477359400852388f99c508305b632947be8076f4ea4a4ad08075c2508e481d6c946d12b80b90964ab834bab0000000000000000000000007be8076f4ea4a4ad08075c2508e481d6c946d12b000000000000000000000000d15a3cddebd2f841b9fb7e213ee9df89577fba0500000000000000000000000000000000000000000000000000000000000000000000000000000000000000005b3256965e7c3cf26e11fcaf296dfc8807c0107300000000000000000000000073883743dd9894bd2d43e975465b50df8d3af3b20000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000007be8076f4ea4a4ad08075c2508e481d6c946d12b0000000000000000000000009086b1f411cb815197c01abffe9277ad2a30ca8e000000000000000000000000d15a3cddebd2f841b9fb7e213ee9df89577fba05000000000000000000000000000000000000000000000000000000000000000000000000000000000000000073883743dd9894bd2d43e975465b50df8d3af3b20000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003520000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008251670c2ad4000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000615eb363000000000000000000000000000000000000000000000000000000006160054360f4800b6f4d60203cad43bcf54e9a696cb004b3744fb367d2bf982bcae46d42000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003520000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008251670c2ad4000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000615efb5900000000000000000000000000000000000000000000000000000000000000000161ed3b01f05c59fbd857d14013f4c6becb462f2688fc2aa4f37e256dcede2e0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006a0000000000000000000000000000000000000000000000000000000000000074000000000000000000000000000000000000000000000000000000000000007e0000000000000000000000000000000000000000000000000000000000000088000000000000000000000000000000000000000000000000000000000000009200000000000000000000000000000000000000000000000000000000000000940000000000000000000000000000000000000000000000000000000000000001b000000000000000000000000000000000000000000000000000000000000001bd2c3fdf5ac1239c39a4ae42f9d4e3662fc235c61dc46f5cd182c8df93c2de3902fc874e3f98d22e07381a7fb86a96acfa4f0837383eb2aa6b752569347dbe845d2c3fdf5ac1239c39a4ae42f9d4e3662fc235c61dc46f5cd182c8df93c2de3902fc874e3f98d22e07381a7fb86a96acfa4f0837383eb2aa6b752569347dbe8450000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006423b872dd0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d15a3cddebd2f841b9fb7e213ee9df89577fba05000000000000000000000000000000000000000000000000000000000000148a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006423b872dd0000000000000000000000009086b1f411cb815197c01abffe9277ad2a30ca8e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000148a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006400000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000064000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c080a03581f72131f9dca69c6d69e3567312d6ec9c76d7e6cddec2c9cdc5a3dbd69c68a054412fcc69ffaee92f2d82c45d26ab0561bc154fdaf04f334548729ccbcd81be");
  const tx = eth.signTransaction(
    "44'/60'/0'/0",
    serializedTx,
  );
  await waitForAppScreen(sim);
  await sim.navigateAndCompareSnapshots('.', 'nanos_atomicMatch_single_address_weth', [11, 0]);
  await tx;
}));

// from https://etherscan.io/tx/0xfb7ea354650bf5c5dcb84340c9da9ec092bf296a1ff81302da9d449c086bdbac
// but WETH address is misstyped : c02aaa -> c02baa
test('[Nano S] nanos_atomicMatch_single_address_unknown_token', zemu("nanos", async (sim, eth) => {
  const serializedTx = txFromEtherscan("0x02f909d4018201b98477359400852388f99c508305b632947be8076f4ea4a4ad08075c2508e481d6c946d12b80b90964ab834bab0000000000000000000000007be8076f4ea4a4ad08075c2508e481d6c946d12b000000000000000000000000d15a3cddebd2f841b9fb7e213ee9df89577fba0500000000000000000000000000000000000000000000000000000000000000000000000000000000000000005b3256965e7c3cf26e11fcaf296dfc8807c0107300000000000000000000000073883743dd9894bd2d43e975465b50df8d3af3b20000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c02baa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000007be8076f4ea4a4ad08075c2508e481d6c946d12b0000000000000000000000009086b1f411cb815197c01abffe9277ad2a30ca8e000000000000000000000000d15a3cddebd2f841b9fb7e213ee9df89577fba05000000000000000000000000000000000000000000000000000000000000000000000000000000000000000073883743dd9894bd2d43e975465b50df8d3af3b20000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003520000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008251670c2ad4000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000615eb363000000000000000000000000000000000000000000000000000000006160054360f4800b6f4d60203cad43bcf54e9a696cb004b3744fb367d2bf982bcae46d42000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003520000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008251670c2ad4000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000615efb5900000000000000000000000000000000000000000000000000000000000000000161ed3b01f05c59fbd857d14013f4c6becb462f2688fc2aa4f37e256dcede2e0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006a0000000000000000000000000000000000000000000000000000000000000074000000000000000000000000000000000000000000000000000000000000007e0000000000000000000000000000000000000000000000000000000000000088000000000000000000000000000000000000000000000000000000000000009200000000000000000000000000000000000000000000000000000000000000940000000000000000000000000000000000000000000000000000000000000001b000000000000000000000000000000000000000000000000000000000000001bd2c3fdf5ac1239c39a4ae42f9d4e3662fc235c61dc46f5cd182c8df93c2de3902fc874e3f98d22e07381a7fb86a96acfa4f0837383eb2aa6b752569347dbe845d2c3fdf5ac1239c39a4ae42f9d4e3662fc235c61dc46f5cd182c8df93c2de3902fc874e3f98d22e07381a7fb86a96acfa4f0837383eb2aa6b752569347dbe8450000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006423b872dd0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d15a3cddebd2f841b9fb7e213ee9df89577fba05000000000000000000000000000000000000000000000000000000000000148a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006423b872dd0000000000000000000000009086b1f411cb815197c01abffe9277ad2a30ca8e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000148a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006400000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000064000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c080a03581f72131f9dca69c6d69e3567312d6ec9c76d7e6cddec2c9cdc5a3dbd69c68a054412fcc69ffaee92f2d82c45d26ab0561bc154fdaf04f334548729ccbcd81be");
  const tx = eth.signTransaction(
    "44'/60'/0'/0",
    serializedTx,
  );
  await waitForAppScreen(sim);
  await sim.navigateAndCompareSnapshots('.', 'nanos_atomicMatch_single_address_unknown_token', [13, 0]);
  await tx;
}));

// from https://etherscan.io/tx/0xc9361abaa6fd920b34e506158b860170ed2e51faa40967df7ddfe6b2eecec4cf
test('[Nano S] nanos_atomicMatch_bundle_address_eth', zemu("nanos", async (sim, eth) => {
  const serializedTx = txFromEtherscan("0x02f91a5c0182020e8459682f008513cc101270830a67be947be8076f4ea4a4ad08075c2508e481d6c946d12b880f9ccd8a1c508000b919e4ab834bab0000000000000000000000007be8076f4ea4a4ad08075c2508e481d6c946d12b00000000000000000000000080163e9126260e34851ffd82db2f2897c8751e50000000000000000000000000e6a1379df8ef4ce6f7d5c0371b964b34d0fdff840000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c99f70bfd82fb7c8f8191fdfbfb735606b15e5c5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007be8076f4ea4a4ad08075c2508e481d6c946d12b000000000000000000000000e6a1379df8ef4ce6f7d5c0371b964b34d0fdff8400000000000000000000000000000000000000000000000000000000000000000000000000000000000000005b3256965e7c3cf26e11fcaf296dfc8807c01073000000000000000000000000c99f70bfd82fb7c8f8191fdfbfb735606b15e5c50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000fa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f9ccd8a1c50800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000061617a0400000000000000000000000000000000000000000000000000000000000000004056f7ef488bbfea0e0a014bea37cfc0a182a9cf29d2553b73345b3af748044700000000000000000000000000000000000000000000000000000000000000fa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f9ccd8a1c5080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006117f5ae00000000000000000000000000000000000000000000000000000000000000007cab06a9ae290a73af48938031a8850c7183ee394acc7e594644b2ba5c6d935f0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000006a00000000000000000000000000000000000000000000000000000000000000b60000000000000000000000000000000000000000000000000000000000000102000000000000000000000000000000000000000000000000000000000000014e000000000000000000000000000000000000000000000000000000000000019a000000000000000000000000000000000000000000000000000000000000019c0000000000000000000000000000000000000000000000000000000000000001b000000000000000000000000000000000000000000000000000000000000001be7cd607b109b693ddeb92f13e08cb71480e18afdd212964d02eaa719b8d2f4c111d75078ffb58203e8ddb5a77aa6a0233ca0ff691bb2eb6886b81a24b010010ce7cd607b109b693ddeb92f13e08cb71480e18afdd212964d02eaa719b8d2f4c111d75078ffb58203e8ddb5a77aa6a0233ca0ff691bb2eb6886b81a24b010010c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000048468f0bcaa0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001800000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000300000000000000000000000074ee68a33f6c9f113e22b3b77418b75f85d07d2200000000000000000000000074ee68a33f6c9f113e22b3b77418b75f85d07d2200000000000000000000000074ee68a33f6c9f113e22b3b77418b75f85d07d220000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000c400000000000000000000000000000000000000000000000000000000000000c400000000000000000000000000000000000000000000000000000000000000c4000000000000000000000000000000000000000000000000000000000000024cf242432a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080163e9126260e34851ffd82db2f2897c8751e500000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000f242432a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080163e9126260e34851ffd82db2f2897c8751e500000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000f242432a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080163e9126260e34851ffd82db2f2897c8751e500000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000048468f0bcaa0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001800000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000300000000000000000000000074ee68a33f6c9f113e22b3b77418b75f85d07d2200000000000000000000000074ee68a33f6c9f113e22b3b77418b75f85d07d2200000000000000000000000074ee68a33f6c9f113e22b3b77418b75f85d07d220000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000c400000000000000000000000000000000000000000000000000000000000000c400000000000000000000000000000000000000000000000000000000000000c4000000000000000000000000000000000000000000000000000000000000024cf242432a000000000000000000000000e6a1379df8ef4ce6f7d5c0371b964b34d0fdff8400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000f242432a000000000000000000000000e6a1379df8ef4ce6f7d5c0371b964b34d0fdff8400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000f242432a000000000000000000000000e6a1379df8ef4ce6f7d5c0371b964b34d0fdff8400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000484000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004840000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c001a0413eec95288313973d26e7a0417a74fc9582a21536fdc40d9bc2539d1937a84aa05deec3d439d5c3b6a011add1796247777ea8c8dfe260e6e823d44bd69315a9ef");
  const tx = eth.signTransaction(
    "44'/60'/0'/0",
    serializedTx,
  );
  await waitForAppScreen(sim);
  await sim.navigateAndCompareSnapshots('.', 'nanos_atomicMatch_bundle_address_eth', [11, 0]);
  await tx;
}));

// from https://etherscan.io/tx/0xc9361abaa6fd920b34e506158b860170ed2e51faa40967df7ddfe6b2eecec4cf
// but there are different adresses in atomicize calldatas (74ee ->74fe)
test('[Nano S] nanos_atomicMatch_bundle_multiple_eth', zemu("nanos", async (sim, eth) => {
  const serializedTx = txFromEtherscan("0x02f91a5c0182020e8459682f008513cc101270830a67be947be8076f4ea4a4ad08075c2508e481d6c946d12b880f9ccd8a1c508000b919e4ab834bab0000000000000000000000007be8076f4ea4a4ad08075c2508e481d6c946d12b00000000000000000000000080163e9126260e34851ffd82db2f2897c8751e50000000000000000000000000e6a1379df8ef4ce6f7d5c0371b964b34d0fdff840000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c99f70bfd82fb7c8f8191fdfbfb735606b15e5c5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007be8076f4ea4a4ad08075c2508e481d6c946d12b000000000000000000000000e6a1379df8ef4ce6f7d5c0371b964b34d0fdff8400000000000000000000000000000000000000000000000000000000000000000000000000000000000000005b3256965e7c3cf26e11fcaf296dfc8807c01073000000000000000000000000c99f70bfd82fb7c8f8191fdfbfb735606b15e5c50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000fa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f9ccd8a1c50800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000061617a0400000000000000000000000000000000000000000000000000000000000000004056f7ef488bbfea0e0a014bea37cfc0a182a9cf29d2553b73345b3af748044700000000000000000000000000000000000000000000000000000000000000fa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f9ccd8a1c5080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006117f5ae00000000000000000000000000000000000000000000000000000000000000007cab06a9ae290a73af48938031a8850c7183ee394acc7e594644b2ba5c6d935f0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000006a00000000000000000000000000000000000000000000000000000000000000b60000000000000000000000000000000000000000000000000000000000000102000000000000000000000000000000000000000000000000000000000000014e000000000000000000000000000000000000000000000000000000000000019a000000000000000000000000000000000000000000000000000000000000019c0000000000000000000000000000000000000000000000000000000000000001b000000000000000000000000000000000000000000000000000000000000001be7cd607b109b693ddeb92f13e08cb71480e18afdd212964d02eaa719b8d2f4c111d75078ffb58203e8ddb5a77aa6a0233ca0ff691bb2eb6886b81a24b010010ce7cd607b109b693ddeb92f13e08cb71480e18afdd212964d02eaa719b8d2f4c111d75078ffb58203e8ddb5a77aa6a0233ca0ff691bb2eb6886b81a24b010010c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000048468f0bcaa0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001800000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000300000000000000000000000074ee68a33f6c9f113e22b3b77418b75f85d07d2200000000000000000000000074fe68a33f6c9f113e22b3b77418b75f85d07d2200000000000000000000000074ee68a33f6c9f113e22b3b77418b75f85d07d220000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000c400000000000000000000000000000000000000000000000000000000000000c400000000000000000000000000000000000000000000000000000000000000c4000000000000000000000000000000000000000000000000000000000000024cf242432a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080163e9126260e34851ffd82db2f2897c8751e500000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000f242432a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080163e9126260e34851ffd82db2f2897c8751e500000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000f242432a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080163e9126260e34851ffd82db2f2897c8751e500000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000048468f0bcaa0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001800000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000300000000000000000000000074ee68a33f6c9f113e22b3b77418b75f85d07d2200000000000000000000000074fe68a33f6c9f113e22b3b77418b75f85d07d2200000000000000000000000074ee68a33f6c9f113e22b3b77418b75f85d07d220000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000c400000000000000000000000000000000000000000000000000000000000000c400000000000000000000000000000000000000000000000000000000000000c4000000000000000000000000000000000000000000000000000000000000024cf242432a000000000000000000000000e6a1379df8ef4ce6f7d5c0371b964b34d0fdff8400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000f242432a000000000000000000000000e6a1379df8ef4ce6f7d5c0371b964b34d0fdff8400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000f242432a000000000000000000000000e6a1379df8ef4ce6f7d5c0371b964b34d0fdff8400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000484000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004840000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c001a0413eec95288313973d26e7a0417a74fc9582a21536fdc40d9bc2539d1937a84aa05deec3d439d5c3b6a011add1796247777ea8c8dfe260e6e823d44bd69315a9ef");
  const tx = eth.signTransaction(
    "44'/60'/0'/0",
    serializedTx,
  );
  await waitForAppScreen(sim);
  await sim.navigateAndCompareSnapshots('.', 'nanos_atomicMatch_bundle_multiple_eth', [9, 0]);
  await tx;
}));


//https://etherscan.io/tx/0x7fd83996604004bdddc09d89647cc4087ba4879f6f5a60263d29daa9b1552167
// but payment token c53a9c309ee2f3e333bd6eca806a31d0e2dca5c5 has been replaced to WETH.
test('[Nano S] nanos_atomicMatch_bundle_address_weth', zemu("nanos", async (sim, eth) => {
  const serializedTx = txFromEtherscan("0xf915cb7c85109966c9ef83091fe2947be8076f4ea4a4ad08075c2508e481d6c946d12b80b91564ab834bab0000000000000000000000007be8076f4ea4a4ad08075c2508e481d6c946d12b000000000000000000000000a756ef8e21fc7d0e9097aa41fd3467129eed798d000000000000000000000000d82201e0373ade24b30f86c1d8f2a446cb51d3c20000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c99f70bfd82fb7c8f8191fdfbfb735606b15e5c50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000007be8076f4ea4a4ad08075c2508e481d6c946d12b000000000000000000000000d82201e0373ade24b30f86c1d8f2a446cb51d3c200000000000000000000000000000000000000000000000000000000000000000000000000000000000000005b3256965e7c3cf26e11fcaf296dfc8807c01073000000000000000000000000c99f70bfd82fb7c8f8191fdfbfb735606b15e5c50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc200000000000000000000000000000000000000000000000000000000000000fa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e4e1c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000612b99ef0000000000000000000000000000000000000000000000000000000000000000d03a608d2402ed6e32a3585c28b55d8c06d957159f8d34a99772dabaa1dd800500000000000000000000000000000000000000000000000000000000000000fa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e4e1c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006116cedc00000000000000000000000000000000000000000000000000000000000000000c7768501b78545bc74f553f49e5d8e8598a3874c35cf7618a212116791579170000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000006a00000000000000000000000000000000000000000000000000000000000000a400000000000000000000000000000000000000000000000000000000000000de0000000000000000000000000000000000000000000000000000000000000118000000000000000000000000000000000000000000000000000000000000015200000000000000000000000000000000000000000000000000000000000001540000000000000000000000000000000000000000000000000000000000000001b000000000000000000000000000000000000000000000000000000000000001bbc49b7add62873b9fd9cf7c666121f35b33ca5b593c89a9731d7fafea99210511ceee2d8981910b0f1daa7a76fad0c75edfee7f51e4ac7bca69103b72ad01956bc49b7add62873b9fd9cf7c666121f35b33ca5b593c89a9731d7fafea99210511ceee2d8981910b0f1daa7a76fad0c75edfee7f51e4ac7bca69103b72ad019560000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000036468f0bcaa000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000014000000000000000000000000000000000000000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000002000000000000000000000000a342f5d851e866e18ff98f351f2c6637f4478db5000000000000000000000000a342f5d851e866e18ff98f351f2c6637f4478db5000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000c400000000000000000000000000000000000000000000000000000000000000c40000000000000000000000000000000000000000000000000000000000000188f242432a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a756ef8e21fc7d0e9097aa41fd3467129eed798d67e1ab582fd4744c04a817593a089e82129bc18c000000000000000000801800000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000f242432a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a756ef8e21fc7d0e9097aa41fd3467129eed798d7a9fe22691c811ea339d9b73150e6911a5343dca000000000000000007000800000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000036468f0bcaa000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000014000000000000000000000000000000000000000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000002000000000000000000000000a342f5d851e866e18ff98f351f2c6637f4478db5000000000000000000000000a342f5d851e866e18ff98f351f2c6637f4478db5000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000c400000000000000000000000000000000000000000000000000000000000000c40000000000000000000000000000000000000000000000000000000000000188f242432a000000000000000000000000d82201e0373ade24b30f86c1d8f2a446cb51d3c2000000000000000000000000000000000000000000000000000000000000000067e1ab582fd4744c04a817593a089e82129bc18c000000000000000000801800000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000f242432a000000000000000000000000d82201e0373ade24b30f86c1d8f2a446cb51d3c200000000000000000000000000000000000000000000000000000000000000007a9fe22691c811ea339d9b73150e6911a5343dca000000000000000007000800000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000364000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003640000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000025a0ce12b41ada2bf52d5a2923fdc51ed95c47d0f76ddf4a7bf24daaab5acc8bc740a04dccf64d7d8a190e12931411402b1fe5fbc5cc1572a1ecc042be361606bece87");
  const tx = eth.signTransaction(
    "44'/60'/0'/0",
    serializedTx,
  );
  await waitForAppScreen(sim);
  await sim.navigateAndCompareSnapshots('.', 'nanos_atomicMatch_bundle_address_weth', [12, 0]);
  await tx;
}));

//https://etherscan.io/tx/0x7fd83996604004bdddc09d89647cc4087ba4879f6f5a60263d29daa9b1552167
test('[Nano S] nanos_atomicMatch_bundle_address_unknown_token', zemu("nanos", async (sim, eth) => {
  const serializedTx = txFromEtherscan("0xf915cb7c85109966c9ef83091fe2947be8076f4ea4a4ad08075c2508e481d6c946d12b80b91564ab834bab0000000000000000000000007be8076f4ea4a4ad08075c2508e481d6c946d12b000000000000000000000000a756ef8e21fc7d0e9097aa41fd3467129eed798d000000000000000000000000d82201e0373ade24b30f86c1d8f2a446cb51d3c20000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c99f70bfd82fb7c8f8191fdfbfb735606b15e5c50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c53a9c309ee2f3e333bd6eca806a31d0e2dca5c50000000000000000000000007be8076f4ea4a4ad08075c2508e481d6c946d12b000000000000000000000000d82201e0373ade24b30f86c1d8f2a446cb51d3c200000000000000000000000000000000000000000000000000000000000000000000000000000000000000005b3256965e7c3cf26e11fcaf296dfc8807c01073000000000000000000000000c99f70bfd82fb7c8f8191fdfbfb735606b15e5c50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c53a9c309ee2f3e333bd6eca806a31d0e2dca5c500000000000000000000000000000000000000000000000000000000000000fa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e4e1c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000612b99ef0000000000000000000000000000000000000000000000000000000000000000d03a608d2402ed6e32a3585c28b55d8c06d957159f8d34a99772dabaa1dd800500000000000000000000000000000000000000000000000000000000000000fa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e4e1c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006116cedc00000000000000000000000000000000000000000000000000000000000000000c7768501b78545bc74f553f49e5d8e8598a3874c35cf7618a212116791579170000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000006a00000000000000000000000000000000000000000000000000000000000000a400000000000000000000000000000000000000000000000000000000000000de0000000000000000000000000000000000000000000000000000000000000118000000000000000000000000000000000000000000000000000000000000015200000000000000000000000000000000000000000000000000000000000001540000000000000000000000000000000000000000000000000000000000000001b000000000000000000000000000000000000000000000000000000000000001bbc49b7add62873b9fd9cf7c666121f35b33ca5b593c89a9731d7fafea99210511ceee2d8981910b0f1daa7a76fad0c75edfee7f51e4ac7bca69103b72ad01956bc49b7add62873b9fd9cf7c666121f35b33ca5b593c89a9731d7fafea99210511ceee2d8981910b0f1daa7a76fad0c75edfee7f51e4ac7bca69103b72ad019560000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000036468f0bcaa000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000014000000000000000000000000000000000000000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000002000000000000000000000000a342f5d851e866e18ff98f351f2c6637f4478db5000000000000000000000000a342f5d851e866e18ff98f351f2c6637f4478db5000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000c400000000000000000000000000000000000000000000000000000000000000c40000000000000000000000000000000000000000000000000000000000000188f242432a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a756ef8e21fc7d0e9097aa41fd3467129eed798d67e1ab582fd4744c04a817593a089e82129bc18c000000000000000000801800000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000f242432a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a756ef8e21fc7d0e9097aa41fd3467129eed798d7a9fe22691c811ea339d9b73150e6911a5343dca000000000000000007000800000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000036468f0bcaa000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000014000000000000000000000000000000000000000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000002000000000000000000000000a342f5d851e866e18ff98f351f2c6637f4478db5000000000000000000000000a342f5d851e866e18ff98f351f2c6637f4478db5000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000c400000000000000000000000000000000000000000000000000000000000000c40000000000000000000000000000000000000000000000000000000000000188f242432a000000000000000000000000d82201e0373ade24b30f86c1d8f2a446cb51d3c2000000000000000000000000000000000000000000000000000000000000000067e1ab582fd4744c04a817593a089e82129bc18c000000000000000000801800000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000f242432a000000000000000000000000d82201e0373ade24b30f86c1d8f2a446cb51d3c200000000000000000000000000000000000000000000000000000000000000007a9fe22691c811ea339d9b73150e6911a5343dca000000000000000007000800000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000364000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003640000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000025a0ce12b41ada2bf52d5a2923fdc51ed95c47d0f76ddf4a7bf24daaab5acc8bc740a04dccf64d7d8a190e12931411402b1fe5fbc5cc1572a1ecc042be361606bece87");
  const tx = eth.signTransaction(
    "44'/60'/0'/0",
    serializedTx,
  );
  await waitForAppScreen(sim);
  await sim.navigateAndCompareSnapshots('.', 'nanos_atomicMatch_bundle_address_unknown_token', [13, 0]);
  await tx;
}));

// accept offer
test('[Nano S] nanos_atomicMatch_accept_offer', zemu("nanos", async (sim, eth) => {
  const serializedTx = txFromEtherscan("0x02f909d40182038a8459682f008517fb2b170183050a78947be8076f4ea4a4ad08075c2508e481d6c946d12b80b90964ab834bab0000000000000000000000007be8076f4ea4a4ad08075c2508e481d6c946d12b000000000000000000000000dbfb45ac11ce31757e09e96e0820831c6cff37af00000000000000000000000000000000000000000000000000000000000000000000000000000000000000005b3256965e7c3cf26e11fcaf296dfc8807c01073000000000000000000000000bbe23e96c48030dc5d4906e73c4876c254100d330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000007be8076f4ea4a4ad08075c2508e481d6c946d12b000000000000000000000000872f6a5242a3e3aa2364c47455942d94f84832e5000000000000000000000000dbfb45ac11ce31757e09e96e0820831c6cff37af0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000bbe23e96c48030dc5d4906e73c4876c254100d330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002ee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001bc16d674ec80000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000616d43d700000000000000000000000000000000000000000000000000000000616e95b07f3b3fb8acf40caf23b2bc8ab7a6005f2cb28f7ba6f1accd6cf3b6f1ce5e7838000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002ee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001bc16d674ec80000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000616d719f000000000000000000000000000000000000000000000000000000000000000049d000c9de908a574f71cfe9193ee84d65c409bb9cab9b1b8687868983021dea0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006a0000000000000000000000000000000000000000000000000000000000000074000000000000000000000000000000000000000000000000000000000000007e0000000000000000000000000000000000000000000000000000000000000088000000000000000000000000000000000000000000000000000000000000009200000000000000000000000000000000000000000000000000000000000000940000000000000000000000000000000000000000000000000000000000000001b000000000000000000000000000000000000000000000000000000000000001b06e5da91511cd8ff3e5c5224f3dcd4bb1ab04868a1540cb55fccea8388fe8b437bba0cb9c82c50644b9fd995ef5c2ad5fc5985378b219f19a62c45ff28a9236c06e5da91511cd8ff3e5c5224f3dcd4bb1ab04868a1540cb55fccea8388fe8b437bba0cb9c82c50644b9fd995ef5c2ad5fc5985378b219f19a62c45ff28a9236c5c5321ae45550685308a405827575e3d6b4a84aa000000000000000000000000000000000000000000000000000000000000000000000000000000000000006423b872dd0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dbfb45ac11ce31757e09e96e0820831c6cff37af0000000000000000000000000000000000000000000000000000000000000c1400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006423b872dd000000000000000000000000872f6a5242a3e3aa2364c47455942d94f84832e500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c1400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006400000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000064000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c001a0d6cbc7ebe88c654bb3632dc37104a6aa38e661b0a02a614ba22a0d78e156d5c1a02310c159efd3cfb942972602e2fc874d57a8e520d9f06b7daa4fd91da1e96ad4");
  const tx = eth.signTransaction(
    "44'/60'/0'/0",
    serializedTx,
  );
  await waitForAppScreen(sim);
  await sim.navigateAndCompareSnapshots('.', 'nanos_atomicMatch_accept_offer', [13, 0]);
  await tx;
}));